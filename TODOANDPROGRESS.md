# To do
- [Server + Frontend] Stripe for recurring payments of premium tier [https://stripe.com/docs/billing/quickstart] [https://www.youtube.com/watch?v=1r-F3FIONl8]
    - https://saasbase.dev/blog/subscription-payments-1-adding-basic-and-pro-subscription-plans-using-stripe [ok?]
    - https://saasbase.dev/blog/subscription-payments-2-keeping-track-of-customer-billing-information-using-mongo-and-stripe-webhooks [halfway; managed to connect webhook to create subscription and it is linked to the customerId; next step is to call the start subscription API]
    - https://saasbase.dev/blog/subscription-payments-3-update-and-cancel-plans-via-a-manage-billing-screen-using-stripe
    - https://saasbase.dev/blog/subscription-payments-4-access-premium-content-based-on-a-subscription-plan
    - https://saasbase.dev/blog/subscription-payments-1-adding-basic-and-pro-subscription-plans-using-stripe
    - https://github.com/bdcorps/stripe-subscriptions-nodejs
    - Note, for testing local with stripe, need to install stripe cli from stripe website. 
    - For windows, after downloading, need add path variable:
    - in git bash:
        - notepad ~/.bashrc
        - copy paste the path to the downloaded and extracted stripe; put this in notepad and save:
        - export PATH="/drive/path/to/folder/with/stripe:$PATH" e.g. for me, it is in downloads/stripe folder. Hence, i used below
        - export PATH="/d/Users/Denli/Downloads/stripe:$PATH"
        - save and close the notepad then restart terminal
        - stripe login
        - cancel, then do this to listen to the webhook; put whatever endpoint and localhost pot being used
        - stripe listen --forward-to localhost:3001/payments/stripe/webhook
        - now, when we do stuff, we with stripe, it will send a event to that endpoint. Note:this is for local testing only. 
        - we also have to do stripe listen ..... whenver we want to do local testing
    - testing credit card number: 4242424242424242

- [Client] Settings Page (include stripe (just show for now and change status to paid; dont need actually connect to stripe yet))
- [Client] Sorting for Tasks
- [Client] Ensure proper error handling done
- [Server] Place a timer on the JWT Token (e.g. maybe valid for 30 minutes ok)
- [Client] Basic styling using MUI
- [Server + Client] Session for login
- [Server + Client] Add OAuth (Gmail only first) as authentication

- TBC... sometime in the future...
- [Server + Frontend] Set up crypto payments for recurring payments premium tier
    - Create a smart contract to handle to recurring payments. The idea is: user sets allowance for ERC20 token > a server calls the smart contract every 1 month > the function called reduces the ERC20 balance directly from their wallet (try this out first) > upon success, server calls API to backend to change status to paid, if fail, change status to free
- [Server] Refactor common authorization validation (e.g. if they own the project/task) into a middleware instead of copy pasting throughout app. maybe put relevant stuff (e.g. the user itself) into req (like how we placed the email) so that we can reduce finding details for the user everytime
- [Client] work more on basic structure of share project and unlock
    - unlock: need confirmation to unlock, also let usual know only 1 can unlock unless premium, etc....
    - share: multiple adding of emails and when click x, should have maybe another modal confirmation (TBC?)
- [Server] Add auth for User routes for admin only
- [Server] Extend functionality Task entity to include custom tasks (i.e. custom columns)
- [Server] Enable choosing of either read only or view only for sharing


# Done
- 16/06/23: Initialization of client and server app
- 20/06/23: [Server] Basic Create and read for just main Project (creating data in the project do later) with mongodb mongoose express node. Ensure correct folder structure (controllers, models, routes)
- 22/06/23: [Server] Basic CRUD functionalities for Project entity
- 22/06/23: [Server] Basic create and read for User entity
- 23/06/23: [Server] Extend functionality for User entity (e.g. password validation, sign up (create) , login (extension of get), etc...)
- 23/06/23: [Server] Added authorization for certain APIs. When user logs in, there will be a JWT token returned which must be used to for authorization for some APIs
- 23/06/23: [Server] Link project to users and ensure only the users can edit the project; Project should now have a owner field. Upon creating, link the email to the Project
- 23/06/23: [Server] CRUD Functionalities of Task entity and link it to the project (i.e. the columns and date for the "table")
- 24/06/23: [Server] Upon editing certain task (just nextAction for now) there should be a history of it.  
- 24/06/23: [Server] Add authorization for tasks and ensure only owner of the project can perform actions on the Task for the given Project
- 24/06/23: [Server] Enable "sharing" of projects. Hence, in Project Entity, add one more property: editors which is an array of the emails.
    - Only owners can share Project with people
    - editors can view the Project but cannot edit the Project (i.e. cant change project description/share,etc...)
- 25/06/23: [Server] Enable remove sharing of projects. Improved error handling for sharing to ensure input of email is an array of strings. Previously, if user sends as text, app will crash because it tries to loop on undefined. 
- 25/06/23: [Server] editors of the board can edit tasks for the Project
- 25/06/23: [Server] Upon delete project, need to ensure that editors are removed and all tasks under it are removed too
- 25/06/23: [Server] Users can only create up to 1 boards if they are in free tier. Shared is not counted. 
- 26/06/23: [Server] If premium user with >1 boards become free user, ensure board is locked and people can't access. Give ability to owner to choose which board to "lock" and which to be able to use if they dont want to go back to premium
    - On Create Project, push the new project to user owned project [ok]
    - On Delete Project, remove project from user own project [ok]
    - Note: check user controller for the changing paid status to lock the board [ok]
    - Give user option to change which board to unlocked. Do in project controller and make new route [ok]
    - Ensure if project is locked, there is validation on tasks that makes the user unable to access resource [ok]
- 26/06/23: [Server] Drafted backend for stripe and oauth google. Need to revisit later
- 27/06/23: [Client] Get basic frontend skeleton out: General App Structure, Login, Layout (Navbar and SideBar), Project (halfway)
- 27/06/23: [Client] Get basic frontend skeleton out: CRUD Functionality for task
- 27/06/23: [Client] Get basic frontend skeleton out: Next Action History; Need to refactor to a modal next time
- 28/06/23: [Client] Get basic frontend skeleton out:
    - Scenario if project locked; users shouldn't be able to access data; it will open but it shows a locked screen. Still can access action toolbar[ok]
    - add project in side bar [ok]
- 28/06/23: [Client] Started with basic styling using Material UI
- 28/06/23: [Client] Refactored Project component out into diffent files
- 28/06/23: [Client] Basic layout structure for navbar and sidebar
- 29/06/23: [Client] Added redux for sharing user details with other components
- 29/06/23: [Client] Get basic frontend skeleton out: 
    - Update delete project button in project itself[ok]
    - Sharing of project ( do in project itself) [halfway]
    - Unlock(if needed) (do in project itself) [halfway]